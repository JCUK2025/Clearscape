<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClearScape Financial Tracker</title>
    
    <link rel="icon" type="image/png" href="app_icon_192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="app_icon_512.png" sizes="512x512">
    <link rel="apple-touch-icon" href="apple_touch_icon.png">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <section id="passwordLockView" class="page">
        <div class="logo-container">
            <img id="lockScreenLogo" src="clearscape_logo.png" alt="App Logo">
        </div>
        <h2 id="lockScreenTitle">Enter Password</h2>
        <input type="password" id="mainPasswordInput" placeholder="Password">
        <button id="unlockAppBtn" class="btn-primary">Unlock</button>
        <a href="#" id="forgotPasswordLink">Forgot Password?</a>
    </section>

    <section id="resetPasswordView" class="page" style="display: none;">
        <div id="securityQuestionStep">
            <h2>Password Reset</h2>
            <p>Please answer your security question.</p>
            <p id="securityQuestionText" class="security-question"></p>
            <input type="text" id="securityAnswerInput" placeholder="Your Answer">
            <button id="submitAnswerBtn" class="btn-primary">Submit Answer</button>
            <button id="backToLockScreenBtn" class="btn-secondary">Cancel</button>
        </div>
        <div id="createNewPasswordStep" style="display: none;">
            <h2>Create New Password</h2>
            <p>Your answer was correct. Please set a new password.</p>
            <input type="password" id="newPasswordResetInput" placeholder="New Password">
            <input type="password" id="confirmNewPasswordResetInput" placeholder="Confirm New Password">
            <button id="saveNewPasswordBtn" class="btn-primary">Save New Password</button>
        </div>
    </section>

    <section id="splashScreen" class="page" style="display: none;">
        <div class="logo-container">
            <img id="appLogo" src="clearscape_logo.png" alt="App Logo">
            <div id="seasonalDecoration"></div>
        </div>
        <h1 id="splashTitle"></h1>
        <p id="factOfTheDay"></p>
        <div class="splash-nav">
            <button class="splash-btn" id="goToDataCentreBtn">Data Centre</button>
            <button class="splash-btn" id="goToNewTransactionBtn">New Transaction</button>
            <button class="splash-btn" id="goToTransactionsBtn">Transactions List</button>
            <button class="splash-btn" id="goToAnalyticsBtn">Analytics</button>
            <button class="splash-btn" id="goToCalendarBtn">Calendar <span id="reminder-badge" class="badge"></span></button>
            <button class="splash-btn" id="goToQuotesBtn">Quotes</button>
            <button class="splash-btn" id="goToSettingsBtn">Settings</button>
        </div>
    </section>

    <section id="setupWizardView" class="page" style="display: none;">
        <div id="stepName" class="setup-step">
            <h2>Welcome! Let's Get Started</h2><p>First, what's your name?</p><input type="text" id="userNameInput" placeholder="Your Name" required><button id="nextStepName" class="btn-primary">Next →</button>
        </div>
        <div id="stepUserTitle" class="setup-step" style="display: none;">
            <h2>What should we call you?</h2>
            <p>Enter a title or nickname.</p>
            <input type="text" id="userTitleInput" placeholder="How you'd like to be addressed">
            <button id="backStepUserTitle" class="btn-secondary">← Back</button>
            <button id="nextStepUserTitle" class="btn-primary">Next →</button>
        </div>
        <div id="stepBusinessName" class="setup-step" style="display: none;">
            <h2>What's your Business Name?</h2><p>This will be used as the title of your dashboard.</p><input type="text" id="businessNameInput" placeholder="e.g., John's Gardening" required><button id="backStepBusinessName" class="btn-secondary">← Back</button><button id="nextStepBusinessName" class="btn-primary">Next →</button>
        </div>
        <div id="stepCurrency" class="setup-step" style="display: none;">
            <h2>Select Your Currency</h2><p>All financial values will be displayed with this currency.</p><select id="currencySetupSelect"><option value="GBP">British Pound (£)</option><option value="USD">US Dollar ($)</option><option value="EUR">Euro (€)</option></select><button id="backStepCurrency" class="btn-secondary">← Back</button><button id="nextStepCurrency" class="btn-primary">Next →</button>
        </div>
        <div id="stepPassword" class="setup-step" style="display: none;">
            <h2>Create an App Password</h2><p>This password will protect your app on startup.</p><input type="password" id="passwordSetupInput" placeholder="Enter password (e.g., 0000)" required><button id="backStepPassword" class="btn-secondary">← Back</button><button id="nextStepPassword" class="btn-primary">Next →</button>
        </div>
        <div id="stepSecurity" class="setup-step" style="display: none;">
            <h2>Set Security Questions</h2>
            <p>In case you forget your password.</p>
            <div class="form-group"><select id="securityQuestion1"></select><input type="text" id="securityAnswer1" placeholder="Answer 1" required></div>
            <div class="form-group"><select id="securityQuestion2"></select><input type="text" id="securityAnswer2" placeholder="Answer 2" required></div>
            <button id="backStepSecurity" class="btn-secondary">← Back</button><button id="nextStepSecurity" class="btn-primary">Next →</button>
        </div>
        <div id="stepBalance" class="setup-step" style="display: none;">
            <h2>Set Your Starting Balance</h2><p>Enter your current cash balance.</p><input type="number" id="balanceSetupInput" placeholder="e.g., 5000.00" step="0.01" required><button id="backStepBalance" class="btn-secondary">← Back</button><button id="nextStepBalance" class="btn-primary">Next →</button>
        </div>
        <div id="stepCategories" class="setup-step" style="display: none;">
            <h2>Review Job Categories</h2><p>Add any others you need.</p>
            <div class="category-setup-grid">
                <input type="text" id="categorySetupInput" placeholder="Add a custom category...">
                <select id="categoryTypeSetupSelect">
                    <option value="Sales">For Sale</option><option value="Expenses">For Expense</option><option value="Deposit">For Deposit</option><option value="Withdrawal">For Withdrawal</option><option value="Refund">For Refund</option>
                </select>
                <button id="addCategoryWizardBtn" class="btn-primary">Add</button>
            </div>
            <div id="categoryWizardList" class="category-wizard-list"></div>
            <button id="backStepCategories" class="btn-secondary">← Back</button><button id="finishSetupBtn" class="btn-primary">Finish Setup</button>
        </div>
    </section>

    <div id="appContainer" style="display: none;">
        <header>
            <button id="headerHomeBtn" class="btn-header">Home</button>
            <h1 id="appNameHeader">ClearScape</h1>
            <div class="header-right-buttons">
                <button id="headerTransactionsBtn" class="btn-header">Transactions</button>
                <button id="headerAnalyticsBtn" class="btn-header">Analytics</button>
                <button id="headerDataCentreBtn" class="btn-header">Data Centre</button>
                <button id="headerSettingsBtn" class="btn-header">Settings</button>
            </div>
        </header>

        <main>
            <section id="newTransactionView" class="app-view">
                <div class="current-balance-container">
                    <h3>Current Balance: <span id="currentBalanceDisplay">£0.00</span></h3>
                </div>
                <div class="transaction-form-container">
                    <h2>Add New Transaction</h2>
                    <form id="transactionForm" class="transaction-form-grid">
                        <div class="form-group"><label for="transactionDate">Date</label><input type="date" id="transactionDate" required></div>
                        <div class="form-group"><label for="transactionName">Name / Description</label>
                            <input type="text" id="transactionName" list="clientDatalist" placeholder="Select or type a client name..." required>
                            <datalist id="clientDatalist"></datalist>
                        </div>
                        <div class="form-group"><label for="transactionTypeSelect">Type of Transaction</label>
                            <select id="transactionTypeSelect" required>
                                <option value="Sale">Sale</option><option value="Expense">Expense</option><option value="Deposit">Deposit</option><option value="Withdrawal">Withdrawal</option><option value="Refund">Refund</option>
                            </select>
                        </div>
                        <div class="form-group"><label for="jobTypeSelect">Job Type / Category</label><select id="jobTypeSelect" required></select></div>
                        <div class="form-group"><label for="amountDueInput">Total Amount (VAT Inclusive)</label><input type="number" id="amountDueInput" placeholder="120.00" step="0.01" required></div>
                        <div id="amountPaidGroup" class="form-group"><label for="amountPaidInput">Amount Paid Now</label><input type="number" id="amountPaidInput" placeholder="120.00" step="0.01" required></div>
                        
                        <div class="form-group full-width vat-section">
                            <div class="checkbox-group">
                                <input type="checkbox" id="isVatApplicableCheckbox"><label for="isVatApplicableCheckbox">Is VAT Applicable?</label>
                            </div>
                            <div id="vatCalculation" style="display: none;">
                                <p>Price Before VAT: <span id="priceBeforeVat">£0.00</span></p>
                                <p>VAT Amount: <span id="vatAmount">£0.00</span></p>
                            </div>
                        </div>

                        <div class="form-group full-width" style="border-top: 1px solid #ddd; padding-top: 15px;">
                            <div class="checkbox-group">
                                <input type="checkbox" id="isRecurringCheckbox"><label for="isRecurringCheckbox">Is this a Recurring Transaction?</label>
                            </div>
                            <div id="recurringOptions" style="display: none; margin-top: 10px; padding: 10px; background-color: #e9e9e9; border-radius: 5px;">
                                <div class="form-group"><label for="recurringFrequency">Frequency:</label>
                                    <select id="recurringFrequency">
                                        <option value="Weekly">Weekly</option><option value="Monthly">Monthly</option><option value="Quarterly">Quarterly</option><option value="Yearly">Yearly</option>
                                    </select>
                                </div>
                                <div class="form-group"><label>Repetitions:</label>
                                    <div><input type="radio" id="repeatForever" name="repeatOption" value="forever" checked><label for="repeatForever">Repeat Forever</label></div>
                                    <div style="margin-top: 5px;"><input type="radio" id="repeatCount" name="repeatOption" value="count"><label for="repeatCount">Repeat for</label><input type="number" id="repetitionCount" min="1" value="12" style="width: 70px; padding: 5px;" disabled><label for="repetitionCount">times</label></div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group full-width"><label for="jobNotesInput">Notes</label><textarea id="jobNotesInput" placeholder="Detailed notes for this transaction..."></textarea></div>
                        <input type="hidden" id="transactionId"><button type="submit" id="addTransactionBtn" class="full-width btn-primary">Add Transaction</button>
                    </form>
                </div>
                <div class="recent-transactions-container">
                    <h3>Recent Transactions</h3>
                    <ul id="recentTransactionList"></ul>
                </div>
            </section>

            <section id="transactionListView" class="app-view">
                <button id="backToDataCentreBtn" class="btn-secondary">← Back to Data Centre</button>
                <h2>All Transactions</h2>
                <div id="filterControls" class="analytics-section">
                    <h3 style="margin-top: 0;">Filters & Search</h3>
                    <div class="filter-bar">
                        <div class="filter-group">
                            <label for="transactionSearchInput">Search</label>
                            <input type="text" id="transactionSearchInput" placeholder="Name or notes...">
                        </div>
                        <div class="filter-group">
                            <label for="filterTransactionType">Type</label>
                            <select id="filterTransactionType">
                                <option value="">All Types</option><option value="Sale">Sale</option><option value="Expense">Expense</option><option value="Deposit">Deposit</option><option value="Withdrawal">Withdrawal</option><option value="Refund">Refund</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="filterJobType">Category</label>
                            <select id="filterJobType"><option value="">All Categories</option></select>
                        </div>
                        <div class="filter-group">
                            <label for="filterPaidStatus">Status</label>
                            <select id="filterPaidStatus"><option value="">All Statuses</option><option value="Outstanding">Outstanding</option><option value="Paid">Fully Paid</option></select>
                        </div>
                        <div class="filter-group">
                            <label for="filterStartDate">From</label>
                            <input type="date" id="filterStartDate">
                        </div>
                        <div class="filter-group">
                            <label for="filterEndDate">To</label>
                            <input type="date" id="filterEndDate">
                        </div>
                        <div class="filter-actions">
                            <button id="applyFiltersBtn" class="btn-primary">Apply</button>
                            <button id="resetFiltersBtn" class="btn-secondary">Reset</button>
                        </div>
                    </div>
                    <div style="margin-top: 15px; border-top: 1px solid #ccc; padding-top: 15px;">
                        <button id="exportCsvBtn" style="background-color: var(--balance-color); color: white;">Download as CSV</button>
                    </div>
                </div>
                <ul id="fullTransactionList"></ul>
            </section>

            <section id="dataCentreView" class="app-view">
                <h2>Data Centre</h2>
                <div class="analytics-section">
                    <h3>This Month's Performance</h3>
                    <div class="summary-cards-container">
                        <div class="summary-card"><h3>Monthly Revenue</h3><p id="monthlyRevenue" class="amount positive">£0.00</p></div>
                        <div class="summary-card"><h3>Monthly Expenses</h3><p id="monthlyExpenses" class="amount negative">£0.00</p></div>
                        <div class="summary-card"><h3>Monthly Net</h3><p id="monthlyNet" class="amount balance">£0.00</p></div>
                    </div>
                </div>
                <div class="analytics-section">
                    <h3>Year-to-Date Performance</h3>
                    <div class="summary-cards-container">
                        <div class="summary-card"><h3>YTD Revenue</h3><p id="ytdRevenue" class="amount positive">£0.00</p></div>
                        <div class="summary-card"><h3>YTD Expenses</h3><p id="ytdExpenses" class="amount negative">£0.00</p></div>
                        <div class="summary-card"><h3>YTD Net</h3><p id="ytdNet" class="amount balance">£0.00</p></div>
                    </div>
                </div>
                <div id="smartInsightsBox" class="analytics-section" style="border-left: 5px solid var(--primary-color);">
                    <h3 style="margin-top: 0; font-size: 1.1em;">Smart Insights 💡</h3>
                    <ul id="insightsList"></ul>
                </div>
                <div style="display:none;">
                    <div id="arCard" class="summary-card"><h3>Total Outstanding (A/R)</h3><p id="totalOutstanding" class="amount negative">£0.00</p></div>
                    <div id="balanceCard" class="summary-card"><h3>Outstanding Balance</h3><p id="outstandingBalance" class="amount balance">£0.00</p></div>
                </div>
            </section>

            <section id="settingsView" class="app-view">
                <button id="backToDataCentreBtnSettings" class="btn-secondary">← Back to Data Centre</button>
                <h2>Application Settings</h2>
                <div id="actualSettings">
                    <div class="analytics-section">
                        <h4>🎨 Branding & Theme</h4>
                        <div class="form-group">
                            <label for="businessNameSetting">Business Name</label>
                            <input type="text" id="businessNameSetting">
                            <button id="saveBusinessNameBtn" class="btn-primary" style="margin-top: 5px;">Save Name</button>
                        </div>
                    </div>
                     <div class="analytics-section">
                        <h4>👥 Client Management</h4>
                        <p style="font-size: 0.9em;">Add your regular clients here for faster transaction entry.</p>
                        <div class="form-group">
                            <label for="clientNameInput">New Client Name</label>
                            <input type="text" id="clientNameInput" placeholder="Enter client's name">
                            <button id="addClientBtn" class="btn-primary" style="margin-top: 5px;">Add Client</button>
                        </div>
                        <hr style="margin: 20px 0;">
                        <h5>Your Clients:</h5>
                        <ul id="clientList" style="list-style: none; padding: 0;"></ul>
                    </div>
                     <div class="analytics-section">
                        <h4>🗂️ Category Management</h4>
                        <p style="font-size: 0.9em;">Add new categories to your lists.</p>
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                            <input type="text" id="newCategoryNameSetting" placeholder="New category name" style="margin-bottom: 0; flex-grow: 1;">
                            <select id="newCategoryTypeSetting" style="margin-bottom: 0; min-width: 140px;">
                                <option value="Sales">For Sale</option><option value="Expenses">For Expense</option><option value="Deposit">For Deposit</option><option value="Withdrawal">For Withdrawal</option><option value="Refund">For Refund</option>
                            </select>
                            <button id="addCategorySettingBtn" class="btn-primary">Add</button>
                        </div>
                        <div id="settingsCategoryList"></div>
                    </div>
                    <div class="analytics-section">
                        <h4>💾 Data Backup & Restore</h4>
                        <p style="font-size: 0.9em;">Export all your app data to a JSON file as a backup.</p>
                        <button id="exportDataBtn" class="btn-primary">Export Data</button>
                        <button id="importDataBtn" class="btn-secondary">Import Data</button>
                        <input type="file" id="importFileInput" accept=".json" style="display: none;">
                    </div>
                    <div class="analytics-section">
                        <h4>⚙️ Tax Settings</h4>
                        <div class="form-group">
                            <label for="vatRateSetting">VAT Rate (%)</label>
                            <input type="number" id="vatRateSetting" step="0.01" placeholder="20">
                            <button id="saveVatRateBtn" class="btn-primary" style="margin-top: 5px;">Save Rate</button>
                        </div>
                    </div>
                    <div class="analytics-section">
                        <h4>⚙️ Security & Reset</h4>
                        <div class="form-group">
                            <label for="updatePasswordInput">New Password</label>
                            <input type="password" id="updatePasswordInput" placeholder="Enter new password">
                        </div>
                        <div class="form-group">
                            <label for="confirmPasswordInput">Confirm New Password</label>
                            <input type="password" id="confirmPasswordInput" placeholder="Re-type new password">
                        </div>
                        <button id="updatePasswordBtn" class="btn-primary" style="margin-top: 5px;">Update Password</button>
                        <hr style="margin: 20px 0;">
                        <p style="font-size: 0.9em;"><strong>Danger Zone:</strong> Resetting will permanently delete all transactions, settings, and personal data.</p>
                        <button id="resetAppBtn" class="btn-danger">Reset All Application Data</button>
                    </div>
                </div>
            </section>
            
            <section id="analyticsView" class="app-view">
                <button id="backToDataCentreBtnAnalytics" class="btn-secondary">← Back to Data Centre</button>
                <h2>Business Analytics</h2>
                <div class="analytics-section" style="display: flex; flex-wrap: wrap; gap: 20px; align-items: flex-end;">
                    <div>
                        <label for="analyticsYearSelect" style="font-weight: bold;"><span id="analyticsPeriodLabel">Select Year</span>:</label>
                        <select id="analyticsYearSelect" style="padding: 8px;"></select>
                    </div>
                    <div>
                        <h4 style="margin: 0 0 5px 0;">Timeframe</h4>
                        <div class="toggle-buttons">
                            <input type="radio" id="viewYTD" name="timeframe" value="ytd" checked>
                            <label for="viewYTD">Year-to-Date</label>
                            <input type="radio" id="viewMonth" name="timeframe" value="month">
                            <label for="viewMonth">By Month</label>
                        </div>
                    </div>
                </div>
                <div id="yearlyKpiContainer" class="summary-cards-container">
                    <div class="summary-card"><h3>Total Revenue</h3><p id="analyticsTotalRevenue" class="amount positive">£0.00</p></div>
                    <div class="summary-card"><h3>Total Expenses</h3><p id="analyticsTotalExpenses" class="amount negative">£0.00</p></div>
                    <div class="summary-card"><h3>Net Profit</h3><p id="analyticsNetProfit" class="amount balance">£0.00</p></div>
                </div>
                <div id="weeklyKpiContainer" class="analytics-section" style="display: none;">
                    <h3>This Month, Week by Week</h3>
                    <div class="summary-cards-container">
                        <div class="summary-card"><h4>Week 1</h4><p id="week1Net" class="amount">£0.00</p></div>
                        <div class="summary-card"><h4>Week 2</h4><p id="week2Net" class="amount">£0.00</p></div>
                        <div class="summary-card"><h4>Week 3</h4><p id="week3Net" class="amount">£0.00</p></div>
                        <div class="summary-card"><h4>Week 4+</h4><p id="week4Net" class="amount">£0.00</p></div>
                    </div>
                </div>
                <div id="chartFilterControls" class="analytics-section">
                    <h4 style="margin-top: 0; margin-bottom: 10px;">Chart View</h4>
                    <div class="toggle-buttons">
                        <input type="radio" id="viewAll" name="chartView" value="all" checked>
                        <label for="viewAll">All</label>
                        <input type="radio" id="viewRevenue" name="chartView" value="revenue">
                        <label for="viewRevenue">Revenue Only</label>
                        <input type="radio" id="viewExpenses" name="chartView" value="expenses">
                        <label for="viewExpenses">Expenses Only</label>
                    </div>
                </div>
                <div class="analytics-section">
                    <h3 id="chartTitle" style="margin-top: 0;">Monthly Performance</h3>
                    <div class="chart-container" style="position: relative; height: 40vh; width: 100%;"><canvas id="monthlyChart"></canvas></div>
                </div>
            </section>

            <section id="invoiceView" class="app-view" style="display: none;">
                <div id="invoiceContent">
                    <div class="invoice-header">
                        <img src="clearscape_logo.png" alt="Business Logo" class="invoice-logo">
                        <div class="invoice-business-details">
                            <h2 id="invoiceBusinessName"></h2>
                            <p>Invoice</p>
                        </div>
                    </div>
                    <div class="invoice-meta">
                        <div>
                            <p><strong>Invoice Number:</strong> <span id="invoiceNumber"></span></p>
                            <p><strong>Date:</strong> <span id="invoiceDate"></span></p>
                        </div>
                        <div>
                            <p><strong>Bill To:</strong></p>
                            <p id="invoiceClientName"></p>
                        </div>
                    </div>
                    <table class="invoice-table">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span id="invoiceDescription"></span></td>
                                <td><span id="invoiceSubtotal"></span></td>
                            </tr>
                            <tr id="invoiceVatRow">
                                <td class="text-right"><strong>VAT (<span id="invoiceVatRate"></span>%)</strong></td>
                                <td><span id="invoiceVatAmount"></span></td>
                            </tr>
                            <tr class="total-row">
                                <td class="text-right"><strong>Total</strong></td>
                                <td><span id="invoiceTotal"></span></td>
                            </tr>
                            <tr>
                                <td class="text-right">Amount Paid</td>
                                <td><span id="invoicePaid"></span></td>
                            </tr>
                            <tr class="total-row balance-due">
                                <td class="text-right"><strong>Balance Due</strong></td>
                                <td><span id="invoiceBalanceDue"></span></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="invoice-footer">
                        <p>Thank you for your business!</p>
                    </div>
                </div>
                <div class="invoice-actions">
                    <button id="printInvoiceBtn" class="btn-primary">Print / Save as PDF</button>
                    <button id="backFromInvoiceBtn" class="btn-secondary">Back to Transactions</button>
                </div>
            </section>
            
            <section id="calendarView" class="app-view" style="display: none;">
                <button id="backToDataCentreBtnCalendar" class="btn-secondary">← Back to Data Centre</button>
                <h2>Calendar & Reminders</h2>
                <div class="calendar-grid">
                    <div id="calendar-container" class="analytics-section">
                        <div id="calendar-header">
                            <button id="prevMonthBtn" class="btn-secondary">&lt;</button>
                            <h3 id="monthAndYear"></h3>
                            <button id="nextMonthBtn" class="btn-secondary">&gt;</button>
                        </div>
                        <div id="calendar-grid-body"></div>
                    </div>
                    <div id="reminders-container" class="analytics-section">
                        <h3>Reminders</h3>
                        <div id="reminder-form">
                            <input type="date" id="reminderDate">
                            <input type="time" id="reminderTime">
                            <textarea id="reminderText" placeholder="New reminder notes..."></textarea>
                            <div><input type="checkbox" id="reminderAlarm"><label for="reminderAlarm">Set Alarm</label></div>
                            <button id="addReminderBtn" class="btn-primary">Add Reminder</button>
                        </div>
                        <ul id="remindersList"></ul>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', function() {
            navigator.serviceWorker.register('service-worker.js').then(function(registration) {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            }, function(err) {
              console.log('ServiceWorker registration failed: ', err);
            });
          });
        }
    </script>
    <script src="script.js"></script>
</body>
</html>